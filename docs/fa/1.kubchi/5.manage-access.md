# مدیریت نقش‌ها و دسترسی‌ها

مدیر سازمان می‌تواند کاربران خود را در گروه‌هایی سازمان‌دهی کند.
برای توضیح کامل‌تر،‌ صفحه‌ی [مدیریت کاربران و گروه‌ها](../manage-user/) را مطالعه کنید.
مدیر همچنین می‌تواند برای کاربران و گروه‌های سازمان خود، سطح دسترسی تعریف کند.
در کوبیت، می‌توان برای هر نقش مجوزهای خاصی صادر کرد و سپس می‌توان این نقش‌ها را به کاربران اختصاص داد.

## نقش‌ها

هر نقش مجموعه‌ای از دسترسی‌ها را تعریف می‌کند که با انتساب آن به گروه یا کاربر، آن دسترسی‌ها به کاربر به‌صورت افزایشی داده می‌شود؛ به این معنا که از مجموعه‌ی دسترسی‌های کاربر در همه‌ی نقش‌هایش، اجتماع ریاضی گرفته می‌شود.

### نقش‌های رایج

در سامانه‌ی کوبیت، برخی نقش‌های رایج از پیش در سامانه تعریف شده‌اند و مدیر سازمان می‌تواند از آن‌ها استفاده کرده و دسترسی کاربران را تنظیم کند
این نقش‌ها قابلیت ویرایش و حذف توسط مدیر سامانه را ندارند؛ ولی وجود آن‌ها تا وقتی که به کسی منتسب نشده‌اند، تأثیری در دسترسی سازمان ندارد.

نقشهای رایج زیر در سامانه به صورت پیش فرض وجود دارند:

- میهمان (system-guest)
  این کاربر تنها مشاهده لیست پروژه ها و آمار کلی سازمان را می بیند
- مشاهده‌گر (system-viewer)
  این نقش برای کاربران امکان مشاهده پروژه ها و پک ها و وضعیت مصرف منابع در آنها را دارد
- توسعه دهنده (kubchi-developer)
  این نقش برای کاربران علاوه بر مشاهده، امکان تنظیم برخی مقادیر در پک ها مانند تنظیمات اتصال به مخزن گیت و وب هوکهای مربوطه را نیز به همراه دارد
- دواپس (kubchi-devops)
  کاربر با این نقش امکان تغییر در متغیرها و تغییرات کامل پک ها و مدیریت مخازن گیت را می تواند انجام دهد.
- مدیر (organization-admin)
  امکان مدیریت کاربران و دسترسی ها از ویژگی های اضافه این نقش نسبت به devops است.

### ایجاد نقش

فرض کنید که می‌خواهید نقش‌ «new-role» را ایجاد کنید و دسترسی‌های لازم را به آن بدهید. برای این کار:

- از منوی کناری و در قسمت سازماندهی، وارد بخش نقش‌ها شوید.
- بر روی دکمه‌ی «نقش جدید» کلیک کنید.
- نام نقش مورد نظر خود را وارد کنید.
- حال برای تعیین دسترسی‌ها، از منوی پایینی، دسترسی‌هایی که مدنظر دارید را اضافه کنید.
  برای مثال، دسترسی‌های «اضافه‌کردن پک جدید» و «به‌روزکردن اطلاعات پک» را انتخاب کنید.
- پس از اضافه‌کردن همه‌ی دسترسی‌های مدنظر، بر روی دکمه‌ی تأیید کلیک کنید.

* پس از تأیید، این نقش به لیست نقش‌های سازمان اضافه خواهد شد.

### ایجاد نقش بر اساس یک نقش دیگر

در صورتی که نقش‌ سفارشی را در تکمیل یک نقش دیگر ایجاد کنیم باید مراحل زیر به‌ترتیب طی شود:

- وارد قسمت «نقش» در بخش «سازماندهی» شوید.
- با کلیک بر روی دکمه‌ی «نقش جدید» می‌توانید یک نقش جدید تعریف کنید.
- در هنگام ایجاد نقش جدید، علاوه بر نام باید دسترسی‌های لازم برای نقش‌ را هم انتخاب کنید.
- در این قسمت می‌توان این نقش جدید را از نقش‌های موجود ارث‌بری کرد. با این کار دسترسی‌هایی که در نقشِ ارث‌برده‌شده وجود دارد، به این نقش نیز اختصاص داده خواهد شد.
  برای این کار باید در تب «نقش‌های پایه» نقش مدنظرتان را انتخاب کنید.
- پس از تأیید، این نقش به لیست نقش‌های سازمان اضافه خواهد شد.

### حذف نقش

برای حذف یک نقش کافی است که بر روی دکمه‌ی «سطل زباله» در کنار نام آن نقش کلیک کنید.

### ویرایش نقش

برای ویرایش یک نقش باید

- وارد قسمت «نقش» در بخش «سازمان‌دهی» شوید.
- وارد نقش موردنظر شوید
- از آن‌جا قسمت‌های مدنظر را ویرایش کنید.

## مدیریت دسترسی کاربران

از طریق انتساب نقش یا عضوکردن یک کاربر در یک گروه، می‌توان دسترسی‌هایی به هر کاربر اعطا کرد.

### تنظیم عضویت کاربر در گروه {#group-subscription}

به دو طریق می توان یک کاربر را به عضویت گروه در آورد:

#### ویرایش کاربران یک گروه

هرگاه بخواهیم چند کاربر را به یک گروه اضافه کنیم، از روش ویرایش کاربران گروه استفاده می‌کنیم.

- از منوی «سازمان‌دهی» وارد بخش «گروه‌ها» شوید
- با کلیک روی نام گروه، وارد صفحه‌ی گروه موردنظر شوید
- دکمه‌ی ویرایش را فشار دهید
- در قسمت کاربران،‌ تغییرات لازم را انجام دهید
- دکمه‌ی تأیید را بزنید که تغییرات ثبت شود

  **توجه کنید: حتماً دکمه‌ی تأیید را بزنید.**

#### ویرایش گروه‌های یک کاربر

هرگاه بخواهیم عضویت یک کاربر در چند گروه را تعیین کنیم، از روش ویرایش گروه‌های کاربر استفاده می‌کنیم.

- از منوی «سازماندهی» وارد بخش «کاربران» شوید
- کاربر مدنظر را انتخاب کنید.
- از قسمت بالا وارد تب «گروه‌ها»‌ شوید.
- برای اضافه‌کردن کاربر به یک گروه،
  - دکمه‌ی «گروه جدید» را بزنید
  - گروه مدنظر را انتخاب کنید
  - بر روی افزودن کلیک کنید
  - پس از این کار گروه موردنظر به لیست گروه‌های کاربر اضافه می‌شود.
- برای حذف یک کاربر از گروه
  - ، بر روی دکمه‌ی سطل زباله‌ی سطر آن گروه کلیک کنید.

### ویرایش نقش‌های کاربر

برای دادن دسترسی به کاربران یا گرفتن آن، باید نقش‌های کاربر را ویرایش کرد.

- وارد قسمت «کاربران» در بخش «سازمان‌دهی» شوید
- کاربر مدنظر را انتخاب کنید
- وارد تب «نقش‌ها» شوید
- برای اضافه‌کردن نقش و دادن دسترسی متناظر آن به کاربر:
  - بر روی دکمه‌ی «افزودن نقش جدید» کلیک کنید
  - در پنجره‌‌ای که باز شده است، نقش مدنظرتان را انتخاب کنید.
    اگر می‌خواهید تنها برای پروژه‌ی معینی به کاربر دسترسی بدهید، باید پروژه‌ی مدنظرتان را نیز انتخاب کنید.
  - با زدن بر روی دکمه‌ی «افزودن» نقش جدید به نقش‌های کاربر اضافه می‌شود.
- برای حذف نقش و گرفتن دسترسی متناظر آن
  - بر روی دکمه‌ی سطل زباله‌ در کنار آن نقش کلیک کنید.

### ویرایش نقش‌های گروه

برای دادن دسترسی به کاربران یک گروه یا گرفتن آن، باید نقش های آن گروه را ویرایش کرد.

- از منوی «سازماندهی» وارد بخش «گروه‌ها» شوید
- با کلیک روی نام گروه، وارد صفحه‌ی گروه موردنظر شوید
- دکمه‌ی ویرایش را فشار دهید
- وارد تب «نقش‌های گروه» شوید
- برای اضافه‌کردن نقش و دادن دسترسی متناظر آن به کاربر:
  - نام نقش مورد نظر خود را انتخاب کنید
  - اگر می‌خواهید تنها برای پروژه‌ی معینی به کاربر دسترسی بدهید، باید پروژه‌ی مدنظرتان را نیز انتخاب کنید.
  - با زدن بر روی دکمه‌ی «افزودن» نقش جدید به لیست نقش‌ها اضافه می‌شود.
- برای حذف نقش و گرفتن دسترسی متناظر آن
  - بر روی دکمه‌ی سطل زباله‌ در کنار نام آن نقش کلیک کنید.
- دکمه تایید را بزنید که تغییرات ثبت شود.

  **توجه کنید: حتماً دکمه‌ی تأیید را بزنید.**
